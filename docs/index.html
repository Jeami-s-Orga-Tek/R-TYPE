<!--
---- EPITECH PROJECT, 2025
---- R-Type
---- File description:
---- index
--->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>R·TYPE — Online Shoot’em Up + Engine</title>
  <meta name="description" content="Modern C++17 multiplayer R-Type-like with a custom ECS engine, a UDP networking layer (Boost.Asio) and an SFML client." />
  <style>
    :root {
      --bg: #0a0f1a;
      --bg2: radial-gradient(1200px 800px at 20% -10%, #1a2458 0%, transparent 60%),
             radial-gradient(800px 600px at 95% 10%, #3b134f 0%, transparent 55%),
             #0a0f1a;
      --panel: rgba(14,20,33,.9);
      --border: #1d2740;
      --text: #e9ecf3;
      --muted: #a5b1c7;
      --brand: #7dd3fc;
      --accent: #c084fc;
      --accent2: #60a5fa;
      --ok: #34d399;
      --warn: #fcd34d;
      --radius: 18px;
      --shadow: 0 16px 40px rgba(0,0,0,.45);
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg2);color:var(--text);font:16px/1.6 Inter,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif}
    a{color:var(--brand);text-decoration:none}
    a:hover{text-decoration:underline}
    nav.top{position:sticky;top:0;backdrop-filter:blur(8px);background:rgba(7,10,20,.55);border-bottom:1px solid #121a31;z-index:50}
    .top-inner{max-width:1200px;margin:0 auto;display:flex;align-items:center;gap:14px;padding:10px 16px}
    .top-inner .spacer{flex:1}
    .top-inner a{padding:8px 10px;font-weight:500;color:#d6def0}
    .top-inner a:hover{color:white}
    header.hero{position:relative;min-height:78vh;display:grid;place-items:center;overflow:hidden}
    .hero-canvas{position:absolute;inset:0;z-index:-1;background:#000}
    .hero-inner{max-width:1100px;padding:110px 20px 56px;text-align:center}
    h1.title{margin:0 0 12px;font-size:clamp(38px,6.8vw,76px);letter-spacing:.06em;font-weight:900;background:linear-gradient(90deg,#8be9ff,#b98aff,#25ddff);-webkit-background-clip:text;background-clip:text;color:transparent}
    p.lead{margin:0 auto 20px;color:var(--muted);max-width:880px}
    .badges{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;margin:14px 0 4px}
    .badge{border:1px solid var(--border);background:rgba(16,24,42,.8);border-radius:999px;padding:6px 10px;font-size:12px;color:#cbd5e1}
    .cta{display:flex;gap:12px;flex-wrap:wrap;justify-content:center;margin-top:18px}
    .btn{background:linear-gradient(180deg,#1c2541,#10182b);border:1px solid #223054;color:#fff;padding:12px 18px;border-radius:999px;box-shadow:var(--shadow);font-weight:600}
    .btn:hover{transform:translateY(-2px);box-shadow:0 24px 60px rgba(0,0,0,.55)}
    .btn.alt{background:linear-gradient(180deg,#2a1341,#140a22);border-color:#3a2053}
    main{padding:20px}
    section{max-width:1200px;margin:0 auto;padding:clamp(24px,3vw,46px) 0}
    h2{font-size:30px;margin:0 0 16px}
    .grid{display:grid;gap:18px;grid-template-columns:repeat(auto-fit,minmax(260px,1fr))}
    .card{background:var(--panel);border:1px solid var(--border);border-radius:var(--radius);padding:18px;box-shadow:var(--shadow)}
    .muted{color:var(--muted)}
    .kpis{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:14px;margin-top:18px}
    .kpi{background:rgba(18,26,46,.7);border:1px solid #17203a;border-radius:14px;padding:14px;text-align:center}
    .kpi h3{margin:0;font-size:28px}
    .kpi p{margin:4px 0 0;color:#cbd5e1;font-size:13px}
    .carousel{display:grid;grid-auto-flow:column;grid-auto-columns:minmax(260px,32%);gap:12px;overflow-x:auto;scroll-snap-type:x mandatory;padding-bottom:4px}
    .shot{scroll-snap-align:start;position:relative;border-radius:14px;overflow:hidden;border:1px solid #253456;background:#000}
    .shot img{display:block;width:100%;height:220px;object-fit:cover;filter:saturate(1.1) contrast(1.05)}
    .shot .cap{position:absolute;bottom:0;left:0;right:0;background:linear-gradient(180deg,transparent,rgba(0,0,0,.65));padding:8px 10px;font-size:12px;color:#d7ddff}
    code,pre{background:#0f1628;border:1px solid #1c2745;border-radius:12px}
    pre{padding:14px;overflow:auto}
  .cols{display:grid;gap:18px;grid-template-columns:1fr}
    .mermaid{background:#0f1628;border:1px solid #1c2745;border-radius:12px;padding:16px}
    .timeline{display:grid;gap:12px}
    .step{border-left:3px solid #3b82f6;padding:8px 12px;background:#0f1628;border-radius:8px;border-top:1px solid #1c2745}
    footer{border-top:1px solid #111a2f;color:var(--muted);text-align:center;padding:48px 0 80px}
  </style>
  <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
  <script>
    window.addEventListener('load', function() {
      mermaid.initialize({ 
        startOnLoad: true, 
        theme: "dark",
        themeVariables: {
          darkMode: true,
          background: '#0f1628',
          primaryColor: '#7dd3fc',
          primaryTextColor: '#ffffff',
          primaryBorderColor: '#1c2745',
          lineColor: '#7dd3fc',
          secondaryColor: '#1c2745',
          tertiaryColor: '#0a0f1a',
          noteTextColor: '#ffffff',
          noteBkgColor: '#2563eb',
          noteBorderColor: '#1d4ed8',
          loopTextColor: '#ffffff',
          activationBkgColor: '#1e40af',
          activationBorderColor: '#3b82f6',
          sequenceNumberColor: '#ffffff'
        }
      });
    });
  </script>
</head>
<body>
  <nav class="top">
    <div class="top-inner">
      <a href="#top"><strong>R·TYPE</strong></a>
      <a href="#features">Features</a>
      <a href="#gameplay">Gameplay</a>
      <a href="#build">Build</a>
      <a href="#arch">Architecture</a>
      <a href="api/index.html" target="_blank" rel="noopener">API Docs</a>
      <a href="#gallery">Gallery</a>
      <span class="spacer"></span>
      <a class="badge" href="#contact">Contact</a>
    </div>
  </nav>

  <header id="top" class="hero">
    <canvas class="hero-canvas" id="starfield"></canvas>
    <div class="hero-inner">
      <h1 class="title">R·TYPE — Online Shoot’em Up + Engine</h1>
      <p class="lead">A multiplayer R-Type-like in modern C++17. Ships a custom <b>ECS</b> engine (shared library), a UDP networking layer (<b>Boost.Asio</b>), and an <b>SFML</b> graphical client.</p>
      <div class="badges">
        <span class="badge">C++17</span>
        <span class="badge">CMake</span>
        <span class="badge">CPM.cmake</span>
        <span class="badge">SFML 2.6.2</span>
        <span class="badge">Boost 1.86.0</span>
        <span class="badge">Linux · Windows (WIP)</span>
      </div>
      <div class="cta">
        <a class="btn" href="#build">Build & Run</a>
        <a class="btn alt" href="#gallery">See Screens</a>
        <a class="btn" href="api/index.html" target="_blank" rel="noopener">API Docs</a>
      </div>
      <div class="kpis">
        <div class="kpi"><h3>8 277</h3><p>Lines of C/C++ (.cpp + .hpp)</p></div>
        <div class="kpi"><h3>4 789</h3><p>Implementation LOC (.cpp)</p></div>
        <div class="kpi"><h3>3 488</h3><p>Header LOC (.hpp)</p></div>
        <div class="kpi"><h3>28</h3><p>.cpp files</p></div>
        <div class="kpi"><h3>53</h3><p>Headers (.hpp)</p></div>
        <div class="kpi"><h3>60 FPS</h3><p>Menu & gameplay</p></div>
      </div>
    </div>
  </header>

  <main>
    <section id="features">
      <h2>What’s inside</h2>
      <div class="grid">
        <article class="card"><h3>Graphical Client (SFML)</h3><p>UI flow <em>Launch → Menu → Lobby → Parameters → Play</em>. Particle/starfield background, embedded fonts, control remapping, username & leaderboard screens.</p></article>
        <article class="card"><h3>UDP Networking (Boost.Asio)</h3><p>Shared <code>NetworkManager</code> handles client/server roles over UDP, message send/receive loop and endpoints registry. Authoritative server loop is under active development.</p></article>
        <article class="card"><h3>Custom ECS Engine</h3><p>Entity/Component/System core with <code>Mediator</code>, registry & managers. Components: <code>Transform</code>, <code>Sprite</code>, <code>RigidBody</code>, <code>Hitbox</code>, <code>Gravity</code>, <code>PlayerInfo</code>, <code>EnemyInfo</code>, <code>ShootingCooldown</code>. Systems: <code>PlayerControl</code>, <code>Physics</code>, <code>Collision</code>, <code>Enemy</code>, <code>Render</code>.</p></article>
        <article class="card"><h3>Cross-platform Build</h3><p>Dependencies via CPM.cmake: SFML 2.6.2, Boost 1.86.0. Binaries drop at the repo root; the engine is a shared library (<code>libengine.so/.dll</code>).</p></article>
        <article class="card"><h3>Quality</h3><p>GitHub Actions CI (see <code>.github/workflows/ci.yml</code>) and helper scripts in <code>ci/</code>.</p></article>
      </div>
    </section>

    <section id="gameplay">
      <h2>Gameplay snapshot</h2>
      <div class="cols">
        <div class="card">
          <h3>Core loop</h3>
          <ul>
            <li>Side-scroll, dodge hazards, shoot missiles.</li>
            <li>Enemies, collisions, damage; spawning handled by systems.</li>
            <li>Power-ups & bosses (WIP).</li>
          </ul>
        </div>
        <div class="card">
          <h3>Default controls</h3>
          <ul>
            <li><b>Move:</b> Arrow keys</li>
            <li><b>Fire / Special:</b> configurable in <em>Parameters → Controls</em></li>
            <li><b>FPS cap:</b> toggle 30/60 in <em>Parameters</em></li>
          </ul>
        </div>
      </div>
    </section>

    <section id="build">
      <h2>Build & Run</h2>
      <div class="grid">
        <div class="card">
          <h3>Requirements</h3>
          <ul>
            <li>Linux (tested) or Windows (MSVC, WIP)</li>
            <li>CMake ≥ 3.10, a C++17 compiler</li>
            <li>Internet access on first configure (CPM.cmake)</li>
          </ul>
        </div>
        <div class="card">
          <h3>Linux quick start</h3>
          <pre><code>./ci/build.sh
./r-type_server &
./r-type_client</code></pre>
          <p class="muted">Le script <code>./ci/build.sh</code> configure et compile (CMake + Ninja, Release) puis dépose les binaires à la racine du dépôt.</p>
        </div>
        <div class="card">
          <h3>Windows (MSVC, WIP)</h3>
          <pre><code>cmake -S . -B build -G "Visual Studio 17 2022" -A x64
cmake --build build --config Release
r-type_server.exe  &
r-type_client.exe</code></pre>
        </div>
      </div>
      <div class="card" style="margin-top: 18px;">
        <h3>Project layout</h3>
        <pre><code>R-TYPE-main/
  CI.md
  CMakeLists.txt
  README.md
  Client/
    CMakeLists.txt
    include/
      Button.hpp
      ControlsConfig.hpp
      ErrorServer.hpp
      GameTypes.hpp
      Launch.hpp
      Leaderboard.hpp
      Lobby.hpp
      Locker.hpp
      Menu.hpp
      ParamButton.hpp
      Parameters.hpp
      ParticleSystem.hpp
      Player.hpp
      Username.hpp
      AudioPlayers/
        SFML/SFML.hpp
      Renderers/
        SFML/SFML.hpp
    src/
  Button.cpp
  ControlsConfig.cpp
  ErrorServer.cpp
  GameTypes.cpp
  Launch.cpp
  Leaderboard.cpp
  Lobby.cpp
  Locker.cpp
  Menu.cpp
  ParamButton.cpp
  Parameters.cpp
  ParticleSystem.cpp
  Player.cpp
  AudioPlayers/SFML/SFML.cpp
  Renderers/SFML/SFML.cpp
  Username.cpp
  main.cpp
  include_common/
    Collision.hpp
    ComponentArray.hpp
    ComponentManager.hpp
    ComponentRegistry.hpp
    Enemy.hpp
    EnemyInfo.hpp
    Entity.hpp
    EntityManager.hpp
    Event.hpp
    EventManager.hpp
    Gravity.hpp
    Hitbox.hpp
    Mediator.hpp
    NetworkManager.hpp
    Physics.hpp
    PlayerControl.hpp
    PlayerInfo.hpp
    Render.hpp
    Renderer.hpp
    RigidBody.hpp
    ShootingCooldown.hpp
    Sprite.hpp
    System.hpp
    SystemManager.hpp
    Transform.hpp
    Utils.hpp
    dlfcn_compat.hpp
  libengine/
    CMakeLists.txt
    src/
      ComponentArray.cpp
      ComponentManager.cpp
      EntityManager.cpp
      Mediator.cpp
      NetworkManager.cpp
      SystemManager.cpp
  Server/
    CMakeLists.txt
    src/
      main.cpp
  docs/
    api/
      index.html</code></pre>
      </div>
    </section>

    <section id="arch">
      <h2>Architecture</h2>
      <div class="cols">
        <div class="card">
          <h3>Handshake, Heartbeat & Replication</h3>
          <div class="mermaid">
sequenceDiagram
autonumber
participant Client
participant Server
participant Physics as "Physics engine"

Client->>Server: HELLO
Server-->>Client: WELCOME

loop Heartbeat
  Client->>Server: PING
  Server-->>Client: PONG
end

Client->>Server: INPUT (tick n)
Server->>Server: Update ECS systems (PlayerControl, Physics, Collision, Enemy)
alt Using external engine
  Server->>Physics: PhysicsUsingEngineSystem
  Physics-->>Server: Positions, velocities
else No engine
  Server->>Server: PhysicsNoEngineSystem
end

Server-->>Client: ENTITY updates
Server-->>Client: COMPONENT updates
Server-->>Client: DESTROY events
          </div>
          <p class="muted">Le client entame la connexion par un <strong>HELLO/WELCOME</strong>, maintient une boucle <strong>PING/PONG</strong> pour le heartbeat puis transmet les entrées horodatées. Le serveur traite l&rsquo;ECS, délègue éventuellement la physique à un plugin et réplique les entités, composants et destructions.</p>
        </div>
        <div class="card">
          <h3>Panorama Client/Serveur/Physique</h3>
          <div class="mermaid">
flowchart LR

  subgraph CLIENT[Client SFML]
    ui[UI screens - Launch -> Menu -> Lobby -> Parameters]
    controls[Controls config input remap]
    netc[NetworkManager CLIENT]
    medc[Mediator ECS core]
    clientsys[Client systems - Render SoundPlayer DevConsole]
    renderer[Renderer SFML]
    audio[Audio player SFML]
    clientcomp[Components - Transform Sprite Sound]

    ui --> medc
    controls --> netc
    medc --> clientsys
    medc --> clientcomp
    clientsys --> renderer
    clientsys --> audio
    medc --> netc
    netc --> medc
  end

  subgraph SERVER[Server Authoritative UDP]
    gameserver[Game server]
    nets[NetworkManager SERVER]
    meds[Mediator ECS core]
    serversys[Server systems - PlayerControl Physics Collision Enemy]
    servercomp[Components - Transform RigidBody Gravity Hitbox PlayerInfo EnemyInfo ShootingCooldown Sprite Sound]

    gameserver --> nets
    nets --> meds
    meds --> serversys
    meds --> servercomp
    meds --> nets
  end

  subgraph PHYSICS[Physics engine plugin]
    iface[Interface PhysicsEngine]
    nophys[PhysicsNoEngine default]
    box2d[Box2D plugin optional]
  end

  netc -- UDP INPUT PING --> nets
  nets -- UDP ENTITY COMPONENT DESTROY --> netc

  serversys -- PhysicsNoEngineSystem --> nophys
  serversys -- PhysicsUsingEngineSystem --> iface
  iface --> box2d
          </div>
          <p class="muted">Ce schéma situe les modules: l&rsquo;UI SFML et les systèmes client partagent le même cœur ECS que le serveur. Le serveur reste autoritaire sur les composants critiques et peut brancher une implémentation de physique externe via l&rsquo;interface <code>PhysicsEngine</code>.</p>
        </div>
      </div>
    </section>

    <section id="gallery">
      <h2>Gallery</h2>
      <div class="carousel">
        <figure class="shot"><img src="assets/screen1.png" alt="Boot screen with insert coin prompt"><figcaption class="cap">Boot splash &ldquo;INSERT COIN&rdquo;.</figcaption></figure>
        <figure class="shot"><img src="assets/screen2.png" alt="Lobby screen with UI buttons"><figcaption class="cap">Lobby UI with starfield background.</figcaption></figure>
        <figure class="shot"><img src="assets/screen3.png" alt="Score selection screen"><figcaption class="cap">Score selection &amp; quick actions.</figcaption></figure>
        <figure class="shot"><img src="assets/screen4.png" alt="Parameters menu"><figcaption class="cap">Parameters panel (video &amp; audio).</figcaption></figure>
        <figure class="shot"><img src="assets/sprites/trophy.png" alt="Trophy icon"><figcaption class="cap">Misc sprite asset (trophy).</figcaption></figure>
      </div>
      <p class="muted">Galerie extraite du client SFML en cours de développement.</p>
    </section>

    <section id="roadmap">
      <h2>Roadmap</h2>
      <div class="timeline">
        <div class="step"><b>Boss & patterns</b> — scripted behaviors, weak points, phases.</div>
        <div class="step"><b>Power-ups</b> — charge shot, options, shields.</div>
        <div class="step"><b>More levels</b> — parallax backgrounds, hazards, checkpoints.</div>
        <div class="step"><b>Windows packaging</b> — installer or portable build.</div>
      </div>
    </section>

    <section id="contact">
      <h2>Credits & Contact</h2>
      <div class="card">
        <p>Student project (Epitech). Questions or feedback? Open an issue or ping me on LinkedIn.</p>
      </div>
    </section>
  </main>

  <footer>© 2025 R·TYPE student project — All trademarks are property of their respective owners.</footer>

  <script>
  const canvas = document.getElementById('starfield');
  const ctx = canvas.getContext('2d');
  let w, h, stars=[];
  function resize(){ w = canvas.width = window.innerWidth; h = canvas.height = Math.max(520, window.innerHeight*0.78); }
  window.addEventListener('resize', resize); resize();
  function init(n=240){ stars = Array.from({length:n}, () => ({ x: Math.random()*w, y: Math.random()*h, z: Math.random()*1.5+0.2 })); }
  init();
  function draw(){
    ctx.clearRect(0,0,w,h);
    for(const s of stars){
      s.x -= (0.25 + s.z*0.75);
      if(s.x < 0){ s.x = w; s.y = Math.random()*h; }
      const r = 0.6 + s.z*1.6;
      ctx.globalAlpha = 0.6 + s.z*0.4;
      ctx.beginPath(); ctx.arc(s.x, s.y, r, 0, Math.PI*2); ctx.fillStyle = '#fff'; ctx.fill();
    }
    requestAnimationFrame(draw);
  }
  draw();
  </script>
</body>
</html>
